<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>meety – Crea profilo</title>
  <link rel="stylesheet" href="style.css">

  <style>
    body{
      margin:0;
      height:100svh;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#120018;
      color:#fff;
      font-family:system-ui,-apple-system,BlinkMacSystemFont;
    }

    .wrap{
      width:100%;
      max-width:420px;
      padding:24px;
      text-align:center;
    }

    h1{
      font-size:36px;
      margin:0 0 8px 0;
      font-weight:700;
      letter-spacing:.2px;
    }

    p{
      margin:0 0 40px 0;
      opacity:.7;
      font-size:18px;
    }

    label{
      display:block;
      text-align:left;
      font-size:14px;
      opacity:.85;
      margin:0 0 6px 0;
    }

    input, select{
      width:100%;
      padding:16px;
      border-radius:14px;
      border:1px solid #3a2248;
      background:#1b0022;
      color:#fff;
      font-size:16px;
      margin:0 0 22px 0;
      outline:none;
      -webkit-appearance:none;
      appearance:none;
    }

    input::placeholder{
      opacity:.5;
    }

    .note{
      font-size:12px;
      opacity:.55;
      margin-top:-14px;
      margin-bottom:24px;
      text-align:left;
    }

    button{
      width:100%;
      padding:18px;
      border-radius:999px;
      border:none;
      background:#ff2f92;
      color:#fff;
      font-size:20px;
      font-weight:600;
      cursor:pointer;
    }

    button:active{
      transform:scale(.97);
    }
  </style>
</head>

<body>

  <div class="wrap">
    <h1>meety</h1>
    <p>Crea il tuo profilo per stasera</p>

    <label for="table">Il tuo tavolo *</label>
    <select id="table">
      <option value="">Seleziona tavolo</option>
    </select>

    <label for="name">Il tuo nome *</label>
    <input id="name" placeholder="Come vuoi apparire">
    <div class="note">Nomi offensivi verranno eliminati.</div>

    <button onclick="go()">Avanti</button>
  </div>

<script>
/* ========= CONFIG EVENTO ========= */

const TAVOLI = [
  1,2,3,4,5,6,7,8,9,10,
  20,21,22,23,
  60,61,62,63,64,65
];

// parole vietate COME PAROLE, non sottostringhe
const BANNED = [
  "cazzo",
  "merda",
  "dio",
  "porco",
  "puttana",
  "stronzo"
];

/* ========= INIT ========= */

// redirect se già avanti nel flusso
const currentStep = localStorage.getItem("step");
if(currentStep && currentStep !== "1"){
  if(currentStep === "results"){
    window.location.href = "results.html";
  } else {
    window.location.href = "step" + currentStep + ".html";
  }
}

// popola tavoli
const tableSelect = document.getElementById("table");
TAVOLI.forEach(t => {
  const opt = document.createElement("option");
  opt.value = t;
  opt.textContent = "Tavolo " + t;
  tableSelect.appendChild(opt);
});

// ripristina dati
if(localStorage.getItem("table")) tableSelect.value = localStorage.getItem("table");
if(localStorage.getItem("name")) document.getElementById("name").value = localStorage.getItem("name");

/* ========= LOGICA ========= */

function go(){
  const name = document.getElementById("name").value.trim();
  const table = document.getElementById("table").value;

  if(!name || !table){
    alert("Compila tutti i campi");
    return;
  }

  // split parole (evita Claudio → dio)
  const words = name.toLowerCase().split(/\s+/);

  for(const w of BANNED){
    if(words.includes(w)){
      alert("Scegli un nome diverso");
      return;
    }
  }

  localStorage.setItem("name", name);
  localStorage.setItem("table", table);
  localStorage.setItem("step", "1"); // <<< FONDAMENTALE

  window.location.href = "step2.html";
}
</script>

</body>
</html>
